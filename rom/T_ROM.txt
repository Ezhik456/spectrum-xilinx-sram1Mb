─ ZX.SPECTRUM (2:5057/31.14) ───────────────────────────────────── ZX.SPECTRUM ─
 Msg  : 4 of 177                                                                
 From : Alexander Kormishin                 2:4616/11.3     22 Oct 98  09:16:42 
 To   : All                                                 24 Oct 98  00:00:34 
 Subj : Help of Test_ROM                                                        
────────────────────────────────────────────────────────────────────────────────

                     Привет тебе, All!


---------------------------------------------------------------


     Прошло уже полгода с того момента, как была написана 
 первая моя  "Test_ROМ1.0". И вот , автор рад представить
 на суд обществу (скорее, на поругание толпе;) новый релиз
 сего продукта.
     Для тех,кто не видел-слышал раньше что это такое,поясняю:
 программа эта предназначена для тестирования ОС ОВ ОГО железа
 компа и  применяется (как правило) при ремонте. Записывается
 в ПЗУ (не менее 8К).
     Данный текст есть пофиксеная и дополненная редакция
 старого (весьма сумбурного:) описания.

 Как обычно,тест имеется в двух версиях: одна зашивается в ПЗУ
 2764, 27128 (в 64sec-файле повторяется два раза подряд ),
 а другую можно как зашивать в 27512(это если нулевая четверть
 там свободная) или подгружать с диска как обычный тест,только
 при условии, что в компьютере имеется кеш-память объемом
 не менее 8К.

      Соблюдено правило всех тестовых ПЗУ - не использовать
 ресурсы компьютера, кроме носителя (т.е. ПЗУ) и процессора.
 В данной тестовой использование памяти начинается с подсчета
 контрольной суммы ПЗУ. Из недокумментированных команд
 использовались половинки индексных регистров. Машины с 48й
 памятью не поддержаны.  а таких ископаемых тест выдаст ошибку
 128й памяти и будет ждать ответной реакции. Как выход, можно
 здесь жать пробел - пойдут тесты, следующие за 128м.


 Предупреждая возможные вопросы, которые могут возникнуть при
 юзании теста, попробую уже сейчас дать на них ответы.


 - по тесту "устойчивость системы RAM-ROM":

     Раньше,когда у меня еще стояли РУ7Г (ну и гадость...),
 на моем компьютере при включенной турбине тест почти всегда
 выдавал ошибку, причем на исход теста влияло очень многое:
 напряжение питания по 5В, загруженность шины, частота на
 процессоре, тип самого процессора (тормозной-быстрый,
 мощный-слабый), тип РУшек, плюс производные от всего этого.
 Вобщем, этот тест показывает насколько корректно процессор
 работает с памятью. Особенно хорошо им смотреть как глючат
 в турбе Ленинград-клоны:).
 Аналогичен тесту на регенерацию, но намного более критичен
 ко всякого рода задержкам в схеме.
 

 - тест регенерации памяти:
 
  Тестируемая память:
   
    - Pentagon-512  (port #7ffd,mask #c7)
    - Pentagon-1024 (port #7ffd,mask #e7)
      чтобы тестилась именно это память, нужно нажать SS
      перед началом теста на "устойчивость..." или перед
      началом теста на регенерацию. К сожалению, программно
      эта память определяется только при наличии CMOS-часов
      (часы-то у меня есть, а вот у накрывшегося компа они 
       могут глючить).
    - Profi256/512/1024 (port #dffd,mask #07)
       уж это-то сам найдет:)
    - SCORPION/KAY-256  (port #1ffd,mask #10)
       тоже сам найдет.
 
 При нахождении ошибки тест выдает соответствующее сообщение,
 при этом реальный номер банка транслируется в номер вида
 %xxx00xxx.  апример(на PROFI) если ошибка была в банках
 #DFFD=7, #7FFD=1 на экране будет "банк #E1". 
 Для Pentagon'a то что выводится на экран, соответствует
 реальному банку.

  К сожалению, у меня нет возможности потестить прогу на
 SCORPION/KAY и Profi256/512 :( , так что здесь могли
 прижиться баги.



 - по тесту "время включения пзу DOS":

     Тест показывает сколько тратится времени на переключение
 контроллером страниц ПЗУ. Отсчет времени ведется от первой
 команды, считанной из ПЗУ Бейсика до первой команды,
 считанной из ПЗУ ДОСа.
  а кривых контроллерах в турбе, бывает, выдается ужасное
 время.


 - с тестом ВГшки,надеюсь все ясно: проверяются на запись-
 считывание регистры #3F, #5F и #7F, если считалось
 записанное, то выдается самоуверенное сообщение, что, мол,
 регистры в должном порядке. В регистр команд записывается
 простенькая команда (поиска) и если она не успевает
 выполниться за 2 сек, то тест выдает "команда не выполнена"
 Признаком выполнения команды служит,естественно,сигнал
 INTRQ (39н ВГ93), считываемый из порта #FF. Временные
 задержки привязаны к инту, так что если он, инт, не был
 найден, то тест ВГ пропустится.


 - аналогично и с тестом музыкалки. Если с регистрами все в
 порядке - тест проходит дальше, если нет - будет выведено
 то, что было записано и было считано.
  адо сказать, в старой версии теста в этом месте имеется
 глюк: тест ругается на AY-3-8910 по той причине, что
 последний немного отличается от YM2149F работой регистров.
 Пофиксено. 


     Если не прошел тест ОЗУ 48 или ОЗУ 128, прога
 вываливается в тест адресов. Если нажать SPACE (пока еще не
 начал ксориться экран), то запустятся тесты, начиная с
 int'ового. Для ускорения заполнения экрана нужно (можно)
 нажимать ENTER.
    
     БОльшую часть тестов здесь можно зациклить на постоянное
 выполнение. Для это нужно в конце требуемого теста нажать
 ENTER. Если будет найден глюк, будет ожидаться нажатие
 чего-нибудь. "Расцикливается" тест также по нажатию ENTER.
  ажимать и подержать ENTER нужно перед окончанием
 зацикленного теста.

     С этого момента все версии Тест-ПЗУ ниже 2.3 объявляются
 морально устаревшими и к юзанию не рекомендуемыми.
     Самостоятельно фиксить код сей проги не рекомендуется,
 но если всплывут какие-либо глюки, сообщите, пожалуйста, мне,
 что и как.
     Хочется поблагодарить  Романа Милюкова (2:4616/8.52)
 за ценные советы и моральную поддержку. Hу, и всем из сетки
 4616, кто тестил.

---------------------------------------------------------------


Hу, все. До свидания, All.
С уважением, Сашка aka AXLR.

---  Posted by LARA v1.80
 * Origin:  fix'em all!  (2:4616/11.3)

